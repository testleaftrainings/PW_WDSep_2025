üìë Agenda for Week 4 Day 4: Advanced Playwright Interactions and Data Parameterization 

üéØ [Focus: Advanced Playwright Interactions and Data Parameterization]  

üìÜ Date: 22 August [Wednesday]  

üïù Session Highlights

‚ø° Recap
* Quick review of key learnings from previous sessions. 

1. *File Upload*  
* Uploading files using file input elements.  
* Working with drag-and-drop style uploads.  
* Example: Automating resume uploads in job portals.

2. *File Download*  
* Automating file download process in Playwright.  
* Setting download paths and verifying file content. 

3. *Reading JSON Files*  
* Importing and parsing JSON test data.   
* Best practices for maintaining test data files.



# File Upload
--------------

### **Definition**

Uploading files into a web application using Playwright.
Playwright simulates attaching files to `<input type="file">` elements or drag-and-drop areas.

---

### **When `type="file"` is Present**

Directly set the file(s) to the input element.

const fileInput = page.locator('input[type="file"]');
await fileInput.setInputFiles('tests/data/sample.pdf');

* **Multiple Files:**

await fileInput.setInputFiles(['file1.png', 'file2.png']);

---

### **When `type="file"` is Not Present (Custom Upload UI)**

In modern web applications (like React, Angular, or Vue), you may not see type="file" in the DOM.

Some apps hide the `<input>` or use a styled button (drag-drop zones).
Steps:

1. Inspect and find the hidden file input.
2. Use `setInputFiles` on that hidden element.


const hiddenInput = page.locator('#hidden-file-input');
await hiddenInput.setInputFiles('tests/data/sample.pdf');


If the input is not accessible at all ‚Üí Workaround is to use OS-level automation (not Playwright‚Äôs scope).

---

# File Download
----------------

### **Definition**

Handling files downloaded by the application (clicking "Download" links/buttons).

---

### **Usage**

Playwright provides a `page.waitForEvent('download')` listener.


const [download] = await Promise.all([
  page.waitForEvent('download'),      // Wait for download event
  page.click('text=Download Report')  // Trigger download
]);

// Save to desired path
await download.saveAs('downloads/report.pdf');

// Get file path in temp location
console.log(await download.path());


**Notes:**

* Default: Playwright saves downloads in a temporary directory.
* Always use `Promise.all` to avoid missing the download event.

---

# Data Parameterization with JSON

---

### **Definition**

Feeding test data from external JSON files instead of hardcoding values.
Useful for **data-driven testing**.

Data Parameterization with CSV
Definition

Reading test data from CSV files and running tests with multiple data sets.
CSV is widely used in organizations for bulk test data (rows = test cases, columns = input fields).

Usage
1. Sample CSV (testData.csv):
username,password
testuser,pass123
wrong,123
admin,admin@123

2. Read CSV in Playwright Test

You can use Node.js fs + papaparse or csv-parse library.

Using papaparse:

import fs from 'fs';
import Papa from 'papaparse';

const file = fs.readFileSync('testData.csv', 'utf8');
const parsed = Papa.parse(file, { header: true }).data;

// parsed = [
//   { username: 'testuser', password: 'pass123' },
//   { username: 'wrong', password: '123' },
//   { username: 'admin', password: 'admin@123' }
// ];

3. Run Tests with Data
for (const user of parsed) {
  test(`Login test for ${user.username}`, async ({ page }) => {
    await page.fill('#username', user.username);
    await page.fill('#password', user.password);
    await page.click('#login');

    // Add assertion
    await expect(page).toHaveURL(/dashboard|error/);
  });
}
